<!DOCTYPE html>
<html lang="en">

<head>
    <title>Clínica <%= title %>
    </title>
    <link rel="icon" href="/images/favicon.png" type="image/x-icon"><!-- Favicon -->
    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/estilos_trabajadores.css">
    <link rel="stylesheet" href="/stylesheets/font/bootstrap-icons.css"> <!-- Iconos -->
    <script src="/sweetalert2/sweetalert2.all.min.js"></script> <!-- Alertas -->
</head>

<body>
    <%- include("../plantillas/header_trabajadores.ejs") %>

        <div class="container mt-4" style="min-height: 84vh;">
            <h2 class="titulo bg-primary text-white p-3 rounded"> <i class="bi bi-gear"></i> Configuración</h2>

            <div class="container p-2 my-4 rounded" style="background-color: #b6dbfc;">
                <h2 class="my-3">Solicitar vacaciones</h2>
                <form action="/zona/trabajador/vacaciones" method="POST">

                    <div class="row">

                        <div class="col col-xl-1">
                            <label for="nombre">Seleccionar:</label>
                        </div>
                        <div class="col col-xl-3">
                            <input type="date" class="form-control" name="dia" required>
                        </div>

                        <div class="col col-xl-1">
                            <button type="submit" class="btn btn-success">Solicitar</button>
                        </div>

                        <div class="col col-xl-2">
                            <button type="button" name="verVacaciones" id="verVacaciones" class="btn btn-primary ">Ver
                                Mis Vacaciones</button>
                        </div>

                    </div>

                </form>

                <!-- Contenedor donde mostrar dinamicamente las vacaciones -->
                <div id="contenedorVacaciones" class="rounded">

                </div>



                <!-- Horario de trabajo -->

                <h2 class="my-3">Horarios de trabajo</h2>
                <form action="/zona/trabajador/insertar-horario-trabajo" method="POST">

                    <div class="row">
                        <div class="col col-xl-1">
                            <label for="dia">Día de la semana:</label>
                        </div>
                        <div class="col col-xl-2">
                            <select class="form-control" name="dia" required>
                                <option value="">Selecciona un día</option>
                                <option value="Lunes">Lunes</option>
                                <option value="Martes">Martes</option>
                                <option value="Miércoles">Miércoles</option>
                                <option value="Jueves">Jueves</option>
                                <option value="Viernes">Viernes</option>
                            </select>
                        </div>
                        <div class="col col-xl-1">
                            <label for="hora_inicio">Hora Entrada:</label>
                        </div>
                        <div class="col col-xl-2">
                            <input type="time" class="form-control" name="hora_inicio" value="">
                        </div>
                        <div class="col col-xl-1">
                            <label for="hora_fin">Hora Salida:</label>
                        </div>
                        <div class="col col-xl-2">
                            <input type="time" class="form-control" name="hora_fin" value="">
                        </div>

                        <div class="col col-xl-1">
                            <button type="submit" class="btn btn-success">Guardar</button>
                        </div>

                        <div class="col col-xl-2">
                            <button type="button" name="verHorarios" id="verHorarios" class="btn btn-primary">Ver Mis
                                Horarios</button>
                        </div>

                    </div>

                </form>



                <div id="contenedorHorarios" style="background-color:  #ededed;">

                </div>



                <!-- la parte de festivos solo tienen acceso los adminisatrdores -->
                <h2 class="my-3">Solicitar Festivo</h2>
                <% if (rol===3) { %>
                    <form action="/zona/trabajador/festivos" method="POST">

                        <div class="row">

                            <div class="col col-xl-1">
                                <label for="dia">Seleccionar:</label>
                            </div>
                            <div class="col col-xl-3">
                                <input type="date" class="form-control" name="dia" required>
                            </div>

                            <div class="col col-xl-3">
                                <input type="text" class="form-control" name="descripcion" placeholder="descripción"
                                    required>
                            </div>

                            <div class="col col-xl-1">
                                <button type="submit" class="btn btn-success">Solicitar</button>
                            </div>

                            <div class="col col-xl-2">
                                <button type="button" name="verFestivos" id="verFestivos" class="btn btn-primary ">Ver
                                    Festivos</button>
                            </div>

                        </div>

                    </form>
                    <% } else { %>
                        <p class="fw-bold">No tienes permisos para acceder a la solicitud de festivos.</p>
                    <% } %>

                        <!-- Contenedor donde mostrar dinamicamente los festivos -->
                        <div id="contenedorFestivos">

                        </div>


                        <!-- la parte de festivos solo tienen acceso los adminisatrdores -->
                        <h2 class="my-3">Administrar Trabajadores</h2>
                        <% if (rol===3) { %>
                            <div class="row my-3">
                                <div class="col">
                                    <a href="/autenticacion/registrarTrabajador" class="btn btn-primary">Agregar Nuevo Trabajador</a>
                                </div>
                            </div>

                            <!-- Contenedor done poner dinamicamente los trabajadores -->
                            <div id="trabajadores">

                            </div>
                        <% } else { %>
                            <p class="fw-bold">No tienes permisos para agregar nuevos usuarios a la plataforma.</p>
                        <% } %>

                        <!-- Alertas -->
                        <% if (typeof mensajeExito !=='undefined' ) { %>
                            <script>
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Éxito',
                                    text: '<%= mensajeExito %>',
                                    timer: 2500,
                                    showConfirmButton: false,
                                    confirmButtonColor: '#3085d6'
                                });
                            </script>
                        <% } %>

                        <% if (typeof mensajeError !=='undefined' ) { %>
                            <script>
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Error',
                                    text: '<%= mensajeError %>',
                                    timer: 2500,
                                    showConfirmButton: false,
                                    confirmButtonColor: '#d33'
                                });
                            </script>
                        <% } %>
            </div>
        </div>
    <!-- Footer -->
    <%- include("../plantillas/footer.ejs") %>


            <script src="/javascripts/horariosTurnosTrabajadores.js"></script>
            <script src="/javascripts/bootstrap.bundle.min.js"></script>
</body>

</html>