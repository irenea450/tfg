<!DOCTYPE html>
<html lang="en">

<head>
    <title>Clínica <%= title %>
    </title>
    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <script src="/sweetalert2/sweetalert2.all.min.js"></script> <!-- Alertas -->
</head>

<body>
    <%- include("../plantillas/header_trabajadores.ejs") %>
        <h1>Datos del trabajador</h1>

        <div class="container-fluid ">

            <form action="/zona/trabajador/datos" method="POST">
    
                <div class="row my-2">
    
                    <div class="col">
                        <label for="rol">Rol del trabajador</label>
                        <select class="col my-1 form-select" name="rol">
                            <option selected>Selecciona el tipo de trabajador</option>
                            <option value="2" <%= trabajador.rol === 2 ? 'selected' : '' %> <%= trabajador.rol === 3 ? 'disabled' : '' %>>Trabajador</option>
                            <!-- La opción de administrador solo la van a poder marcar los administradores, de modo qeu los empleados no puedan tener esos privilegios -->
                            <option value="3" <%= trabajador.rol === 3 ? 'selected' : '' %> <%= trabajador.rol === 2 ? 'disabled' : '' %>>Trabajador - Administrador</option>
                        </select>
                    </div>
                    
                    <div class="col">
                        <label for="estado">Estado del trabajador</label>
                        <select class="col my-1 form-select" name="estado" required>
                            <option value="activo" <%= trabajador.estado === 'activo' ? 'selected' : '' %>>Activo</option>
                            <option value="inactivo" <%= trabajador.estado === 'inactivo' ? 'selected' : '' %>>Inactivo</option>
                        </select>
                    </div>
                    
            
                </div>
    
                <div class="row">
    
                    <div class="col">
                        <label for="nombre">Nombre</label>
                        <input type="text" class="form-control my-1" name="nombre" placeholder="Nombre" value="<%= trabajador.nombre %>" required>
                    </div>
                    <div class="col">
                        <label for="apellidos">Apellidos</label>
                        <input type="text" class="form-control my-1" name="apellidos" placeholder="Apellido 1 Apellido 2" value="<%= trabajador.apellidos %>" required>
                    </div>
    
                </div>
    
                <div class="row my-3">
    
                    <div class="col input-group ">
                        <input type="text" class="form-control " placeholder="Correo" name="correo" value="<%= trabajador.correo %>" readonly>
                    </div>
    
                    <div class="col">
                        <input type="number" class="form-control" name="tlf" placeholder="Teléfono" value="<%= trabajador.tlf %>" required>
                    </div>
    
                </div>
    
                <div class="mb-3">
                    <label for="especialidad" class="form-label">Especialidad</label>
                    <textarea class="form-control" name="especialidad" id="especialidad" rows="3"><%= trabajador.especialidad %></textarea>
                </div>
    
    
                <div class="row p-0 my-5">
                    <div class="d-grid gap-2 col-6 mx-auto">
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </div>
    
            </form>

            <!-- Formuladio de cambio de contarseña -->
            <form action="/zona/trabajador/contrasena" method="POST">
                <div class="row g-3 align-items-center p-0 m-0">
                    <div class="col-auto">
                        <label for="contraseña" class="col-form-label">Nueva contraseña</label>
                    </div>
                    <div class="col-auto">
                        <input type="password" name="contraseña" id="contraseña" class="form-control" required>
                    </div>
                    <div class="col-auto">
                        <span id="passwordHelpInline" class="form-text">
                            Establece una contraseña segura
                        </span>
                    </div>
                    <div class="col-auto">
                        <label for="contraseña" class="col-form-label">Confirmar contraseña</label>
                    </div>
                    <div class="col-auto">
                        <input type="password" name="confrimarContraseña" id="confrimarContraseña" class="form-control" required>
                    </div>
                </div>
            
                <div class="row p-0 my-4">
                    <div class="d-grid gap-2 col-6 mx-auto">
                        <button type="submit" class="btn btn-success">Cambiar Contraseña</button>
                    </div>
                </div>
            </form>


        </div>

        <% if (typeof mensajeExito !== 'undefined') { %>
            <script>
                Swal.fire({
                    icon: 'success',
                    title: 'Éxito',
                    text: '<%= mensajeExito %>',
                    timer: 2500,
                    showConfirmButton: false,
                    confirmButtonColor: '#3085d6'
                });
            </script>
        <% } %>
        
        <% if (typeof mensajeError !== 'undefined') { %>
            <script>
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: '<%= mensajeError %>',
                    timer: 2500,
                    showConfirmButton: false,
                    confirmButtonColor: '#d33'
                });
            </script>
        <% } %>
        

        <script src="/javascripts/bootstrap.bundle.min.js"></script>
</body>
</html>
